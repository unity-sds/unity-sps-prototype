apiVersion: v1
kind: Pod
metadata:
  name: factotum-job-worker
spec:
  containers:
    - name: docker-cmds
      # image: docker:1.12.6
      # command: ["docker", "run", "-p", "80:80", "httpd:latest"]
      image: factotum:unity-v0.0.1
      command: ["/usr/bin/supervisord", "--nodaemon"]
      resources:
        requests:
          cpu: 500m
          memory: 1Gi
      volumeMounts:
        - name: docker-sock
          mountPath: /var/run/docker.sock
        - name: celeryconfig
          mountPath: /root/hysds/celeryconfig.py
          subPath: celeryconfig.py
  volumes:
    - name: docker-sock
      hostPath:
        path: /var/run/docker.sock
    - name: celeryconfig
      configMap:
        name: celeryconfig
